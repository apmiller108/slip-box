:PROPERTIES:
:ID:       BC7E2058-A3F6-4149-9CA3-902B6BDE5D1F
:END:
#+title: Kubectl
#+date: 2022-03-17 08:35 AM
#+updated: 2023-12-05 08:00 AM
#+filetags: :kubernetes:

See also https://kubernetes.io/docs/reference/kubectl/cheatsheet/

| Description             | Command                                              |
|-------------------------+------------------------------------------------------|
| Get namespaces          | kubectl get ns                                       |
| Set namespace           | kubectl config set-context --current --namespace=foo |
| Show config             | kubectl config view                                  |
| Show current namespaces | kubectl config view (then grep namespace)            |
| Show current context    | kubectl config current-context                       |
| Set current context     | kubectl config use-context foo                       |
| Remove context          | kubectl config unset contexts.foo                    |
| Get all pods            | kubectl get pods                                     |
| Exec                    | kubectl exec -it mypod -- bash                       |
| Get deployment info     | kubectl get deployments foo -o yaml                  |

* Recipes
** forward a port
    #+begin_src shell
      kubectl port-forward --namespace foospace $(kubectl get pods --namespace foospace --selector "app=mssql" --output=name) 1433:1433
    #+end_src

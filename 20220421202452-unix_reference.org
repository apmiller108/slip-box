:PROPERTIES:
:ID:       4ac31a1d-cdb1-4722-8215-3ed01414084b
:END:
#+title: Unix reference
#+date: 2022-04-21 20:24 PM
#+updated: 2022-06-21 15:35 PM
#+filetags: :unix:linux:

This is a quick reference for some common Unix commands, tools and
configuration.

* Permissions
  See also [[https://github.com/lansana/unix-permissions-cheat-sheet][this cheatsheet]] for more.
** View file permissions and ownership
   #+begin_src shell
   ls -l
   #+end_src
   
  | type | user | group | other |
  |------+------+-------+-------|
  | -    | rwx  | rw-   | r--   |

  Type could be ~d~ (ie, directory)
   
** Change permissions
    #+begin_src shell
      chmod u+rw file
    #+end_src

    Adds (+), for user (u), read and write (rw) permissions. See ~chmod --help~.

** Change ownership
   #+begin_src shell
   chown username file
   chown username:groupname file
   chgrp groupname file
   #+end_src

* Groups
** List groups
  | cmd                    | description                   |
  |------------------------+-------------------------------|
  | groups                 | list your groups              |
  | groups username        | list a user's groups          |
  | getent group groupname | list users in a group         |
  | cat /etc/group         | list all groups on the system |
   
** Manage group membership
   Use ~gpasswd~

* Magic SysRq key
  Send low level commands regardless of system state (freeze)
  
  - Hold down ~ALT~ + ~SysRq~
    - If on a laptop or keyboard with no ~SysRq~ key use ~Fn~ + ~Prtsc~ and
      release (be keep holding ~ALT~)
  - See also https://en.wikipedia.org/wiki/Magic_SysRq_key
  - ~REISUB~ for a safe restart
  

* Repositories
** Release file expired error
   A couple options:

   1. Find another mirror. One that isn't expired. Or...
   2. Instruct apt to always skip the validity check
   
      #+begin_src shell
      touch /etc/apt/apt.conf.d/99no-check-valid-until && \
      echo 'Acquire::Check-Valid-Until no;' > /etc/apt/apt.conf.d/99no-check-valid-until
      #+end_src
